<a class = "buttton" >Current Workout</a>
<a class = "buttton" href = "Statistics.html">Statistics</a>
<a class = "buttton"href = "History.html">History</a>

<form onsubmit="return validateForm()">
    <h3>Workout Type</h3>
    <select id="type"> <!--This field submitted successfully -->
        <option value="hangboard"> Hangboard </option>
        <option value="pinch block"> Pinch Block</option>..........
    </select>
    <h3 id = "changedHeading">Edge Width</h3>
    <input id="edge" style="display: block" type="number" list="EdgeWidths" title="Edge">
    <select id="pinch" style="display: none"type="number" list="EdgeWidths" title="Edge">
        <option value="thin-wood">Thin Wood</option>
        <option value="wide-wood">Wide Wood</option>
        <option value="thin-metal">Thin Metal</option>
        <option value="wide-metal">Wide Metal</option>
    </select>
    <h3>Time</h3>
    <input id="time" type="number" list="CommonTimes" title="Time">
    <input type="button" onclick="validateForm()" value="Submit">
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    const mySelect = document.getElementById('type');
    const displayHeading = document.getElementById('changedHeading');


    mySelect.addEventListener('change', function() {
        // 3. Get the selected value and text
        const selectedValue = mySelect.value;
        const selectedText = mySelect.options[mySelect.selectedIndex].textContent;


        if (selectedValue === 'hangboard') {
            displayHeading.textContent = "Edge Width";
            document.getElementById("edge").style.display = 'block';
            document.getElementById("pinch").style.display = 'none';
        } else {
            displayHeading.textContent = "Pinch Width";
            document.getElementById("edge").style.display = 'none';
            document.getElementById("pinch").style.display = 'block';

        }
    });

        // Optional: Set initial state if needed
        // You might want to call the update logic once when the page loads
        // to reflect the initial state of the select element.
        // However, in this case, our default option is already handled.
    });
    function validateForm() {
        class workout{
            constructor(t, n, lbs){
                this.weight = lbs
                this.id = n
                this.time = t
            }
        }
        class hangboard extends workout{
            constructor(n, t, e ,lbs ){
                super(t, n, lbs)
                this.type = "h"
                this.edge = e
            }
        }
        class pinchblock extends workout{
            constructor(n, t, w, lbs){
                super(t, n, lbs)
                this.type = "p"
                this.width = w
            }
        }

        let localData = JSON.parse(window.localStorage.workouts)
        console.log(localData)
        let edge = document.getElementById("edge").value
        let pinch = document.getElementById("pinch").selectedIndex
        let time = document.getElementById("time").value
        console.log(document.getElementById('type').selectedIndex)
        
        if (document.getElementById('type').selectedIndex == 0) {
            console.log("hang")
            localData.workouts.push(new hangboard(localData.num + 1, time, edge))
            localData.num++;
        }else{
            console.log("pinch")
            localData.workouts.push(new pinchblock(localData.num + 1,time, pinch))
            localData.num++;
        }

        window.localStorage.workouts = JSON.stringify(localData)
        // window.workouts
    }
</script>

<datalist id="EdgeWidths">
    <option value="8">
    <option value="10">
    <option value="15">
</datalist>
<datalist id="CommonTimes">
    <option value="5">
    <option value="8">
    <option value="10">
</datalist>