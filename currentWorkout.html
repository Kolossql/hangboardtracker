<a class = "buttton" >Current Workout</a>
<a class = "buttton" href = "Statistics.html">Statistics</a>
<a class = "buttton"href = "History.html">History</a>

<form">
    <input type="button" onclick="resetSession()" value="Reset Session">
    <h3>Workout Type</h3>
    <select id="type"> <!--This field submitted successfully -->
        <option value="hangboard"> Hangboard </option>
        <option value="pinch block"> Pinch Block</option>..........
    </select>
    <h3 id = "changedHeading">Edge Width</h3>
    <input id="edge" style="display: block" type="number" list="EdgeWidths" title="Edge">
    <select id="pinch" style="display: none"type="number" list="EdgeWidths" title="Edge">
        <option value="thin-wood">Thin Wood</option>
        <option value="wide-wood">Wide Wood</option>
        <option value="thin-metal">Thin Metal</option>
        <option value="wide-metal">Wide Metal</option>
    </select>
    <h3>Time</h3>
    <input id="time" type="number" list="CommonTimes" title="Time">
    <h3>Weight</h3>
    <input id="weight" type="number"  title="Weight">
    <input type="button" onclick="addLift()" value="Add lift">
    <input type="button" onclick="completeSession()" value="Complete Session">
</form>

<script>
    class workout{
        constructor(t, n, lbs){
            this.weight = lbs
            this.id = n
            this.time = t
        }
    }
    class hangboard extends workout{
        constructor(n, t, e ,lbs ){
            super(t, n, lbs)
            this.type = "h"
            this.edge = e
        }
    }
    class pinchblock extends workout{
        constructor(n, t, w, lbs){
            super(t, n, lbs)
            this.type = "p"
            this.width = w
        }
    }
    document.addEventListener('DOMContentLoaded', function() {
    const mySelect = document.getElementById('type');
    const displayHeading = document.getElementById('changedHeading');


    mySelect.addEventListener('change', function() {
        // 3. Get the selected value and text
        const selectedValue = mySelect.value;
        const selectedText = mySelect.options[mySelect.selectedIndex].textContent;


        if (selectedValue === 'hangboard') {
            displayHeading.textContent = "Edge Width";
            document.getElementById("edge").style.display = 'block';
            document.getElementById("pinch").style.display = 'none';
        } else {
            displayHeading.textContent = "Pinch Width";
            document.getElementById("edge").style.display = 'none';
            document.getElementById("pinch").style.display = 'block';

        }
    });

        // Optional: Set initial state if needed
        // You might want to call the update logic once when the page loads
        // to reflect the initial state of the select element.
        // However, in this case, our default option is already handled.
    });
    function onload(){
        document.getElementById('changedHeading').textContent = "Edge Width";
        document.getElementById("edge").style.display = 'block';
        document.getElementById("pinch").style.display = 'none';
    }
    function resetSession(){
        window.localStorage.workout = JSON.stringify({thisSession: [], num: 0})
    }
    function addLift() {

        let localData = JSON.parse(window.localStorage.workout)
        console.log(localData)
        let edge = parseInt(document.getElementById("edge").value)
        let pinch = document.getElementById("pinch").selectedIndex
        let time = parseInt(document.getElementById("time").value)
        let weight = parseInt(document.getElementById("weight").value)
        console.log(window.localStorage.workout.num)
        
        if (document.getElementById('type').selectedIndex == 0) {
            console.log("hang")
            localData.thisSession.push(new hangboard(localData.num, time, edge, weight))
            localData.num++;
        }else{
            console.log("pinch")
            localData.thisSession.push(new pinchblock(localData.num,time, pinch, weight))
            localData.num++;
        }

        window.localStorage.workout = JSON.stringify(localData)
    }
    function completeSession() {
        let localData = JSON.parse(window.localStorage.sessions)
        localData.sessions.push(window.localStorage.workout.thisSession) 
        window.localStorage.sessions = JSON.stringify(localData)
        
    }
</script>

<datalist id="EdgeWidths">
    <option value="8">
    <option value="10">
    <option value="15">
</datalist>
<datalist id="CommonTimes">
    <option value="5">
    <option value="8">
    <option value="10">
</datalist>